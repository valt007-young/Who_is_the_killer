<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KILLER.EXE â€“ Detective Story Mode</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;width:100%;font-family:'Courier New',monospace;background:#111;color:#fff;display:flex;justify-content:center;align-items:center;}
#game{width:95%;max-width:480px;padding:20px;text-align:center;background:#222;border-radius:15px;box-shadow:0 0 20px rgba(255,255,255,0.2);}
h1{font-size:2em;letter-spacing:2px;color:#fff;text-shadow:0 0 10px #fff,0 0 20px #fff;margin-bottom:15px;}
.mask{width:120px;height:120px;margin:10px auto 20px auto;border-radius:50%;background:white;box-shadow:0 0 25px rgba(255,255,255,.6);}
#levelInfo{margin:10px 0;font-size:1.1em;color:#ff5555;text-shadow:0 0 5px #ff5555;}
.case{display:flex;flex-direction:column;gap:12px;margin:15px 0;}
.statement{padding:12px;border-left:4px solid #fff;background:rgba(255,255,255,0.1);color:#fff;text-align:left;border-radius:5px;transition:0.3s;}
.statement[data-suspect="A"]{border-color:#00ffff;}
.statement[data-suspect="B"]{border-color:#ff0;}
.statement[data-suspect="C"]{border-color:#f00;}
.statement[data-suspect="D"]{border-color:#f0f;}
.statement[data-suspect="E"]{border-color:#0f0;}
.statement:hover{background:rgba(255,255,255,0.2);transform:scale(1.02);}
#input{width:100%;padding:12px;background:#111;color:#fff;border:2px solid #fff;font-size:1em;text-align:center;margin-top:10px;outline:none;box-shadow:0 0 5px #fff;}
#input::placeholder{color:#fff;opacity:0.7;}
#timer{margin-top:10px;font-size:1.2em;color:#ff5555;text-shadow:0 0 5px #ff5555;}
.success{animation:pulse 1.5s infinite;}
@keyframes pulse{0%{opacity:1;}50%{opacity:.5;}100%{opacity:1;}}
.glitch{animation:glitch 0.2s infinite;}
@keyframes glitch{0%{transform:translate(0);}50%{transform:translate(2px,-2px);}100%{transform:translate(-2px,2px);}}
#message{margin-top:10px;font-size:1.3em;color:#0f0;text-shadow:0 0 5px #0f0;display:none;}
</style>
</head>
<body>

<div id="game">
  <div class="mask"></div>
  <h1>KILLER.EXE â€“ Story Mode</h1>
  <div id="levelInfo"></div>
  <div class="case" id="case"></div>
  <input id="input" placeholder="Enter suspect (A / B / C / D / E)" autofocus />
  <div id="timer"></div>
  <div id="message"></div>
</div>

<audio id="winSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_7e5c41a9a0.mp3"></audio>
<audio id="failSound" src="https://cdn.pixabay.com/audio/2022/10/03/audio_946c87c1a4.mp3"></audio>

<script>
document.addEventListener("DOMContentLoaded",()=>{

let level=1,lastSafeLevel=1,timer,timeLeft;
const input=document.getElementById("input");
const caseBox=document.getElementById("case");
const levelInfo=document.getElementById("levelInfo");
const messageDiv=document.getElementById("message");

// Configure level: add more suspects as level increases
function levelConfig(l){
  return {
    time: Math.min(30 + l*10, 180),
    maxSuspects: Math.min(3 + Math.floor(l/2), 5) // Level 1-2: 3 suspects, Level3+: 4-5
  };
}

// Statements pool for suspects
const statementsPool = {
  A:["I didnâ€™t do it.","I was in the kitchen.","I was asleep during the murder.","B is lying.","I was nowhere near the scene."],
  B:["Exactly one of us is lying.","I have an alibi.","I was not there.","C seems suspicious.","I saw nothing unusual."],
  C:["A is the killer.","I have no idea who did it.","B might be suspicious.","I was in my room.","I heard a noise outside."],
  D:["I have an alibi.","I saw nothing.","A seems guilty.","I was in the garden.","B is lying."],
  E:["I was reading.","I saw shadows.","C might be guilty.","I have no idea.","D is suspicious."]
};

// Generate killer case dynamically based on level
let killer,statements,suspectsList;
function generateCase(){
  const cfg=levelConfig(level);
  const allSuspects=["A","B","C","D","E"];
  suspectsList=allSuspects.slice(0,cfg.maxSuspects);
  killer=suspectsList[Math.floor(Math.random()*suspectsList.length)];

  statements = {};
  suspectsList.forEach(s=>{
    const arr=statementsPool[s];
    statements[s] = `${s} says: "${arr[Math.floor(Math.random()*arr.length)]}"`;
  });
}

// Render statements
function render(){
  const cfg=levelConfig(level);
  levelInfo.innerHTML=`LEVEL ${level} | TIME: ${cfg.time}s`;
  caseBox.innerHTML=Object.entries(statements)
    .map(([k,v])=>`<div class="statement" data-suspect="${k}"><b>${k}:</b> ${v}</div>`).join("");
  timeLeft=cfg.time;
  updateTimer();
  messageDiv.style.display="none";
}

// Timer
function updateTimer(){document.getElementById("timer").innerText=`TIME: ${timeLeft}s`;}
function startTimer(){
  clearInterval(timer);
  timer=setInterval(()=>{
    timeLeft--;
    updateTimer();
    if(timeLeft<=0)lose();
  },1000);
}

// Win / Lose
function win(){
  clearInterval(timer);
  document.body.classList.add("success");
  document.getElementById("winSound").play();
  messageDiv.innerText=`ðŸŽ‰ Detective solved the case! Level ${level} cleared.`;
  messageDiv.style.color="#0f0";
  messageDiv.style.display="block";
  setTimeout(()=>{
    document.body.classList.remove("success");
    lastSafeLevel=level;
    level++;
    start();
  },2500);
}

function lose(){
  clearInterval(timer);
  document.body.classList.add("glitch");
  document.getElementById("failSound").play();
  messageDiv.innerText=`ðŸ’€ Wrong guess! The case remains unsolved.`;
  messageDiv.style.color="#f00";
  messageDiv.style.display="block";
  setTimeout(()=>{
    document.body.classList.remove("glitch");
    level=lastSafeLevel;
    start();
  },2500);
}

// Player input
input.addEventListener("keydown",e=>{
  if(e.key==="Enter"){
    const val=input.value.toUpperCase().trim();
    input.value="";
    if(!suspectsList.includes(val)) return;
    val===killer?win():lose();
  }
});

// Start game
function start(){generateCase();render();startTimer();}
start();

});
</script>
</body>
</html>
